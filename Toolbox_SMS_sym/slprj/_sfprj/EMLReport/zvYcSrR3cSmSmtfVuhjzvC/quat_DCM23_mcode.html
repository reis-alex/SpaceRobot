<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="15,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T4U3">DCM</span> = quat_DCM(<span class="var type1" id="S3T48U6">q</span>) <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="15,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%Provides the Direction Cosine Matrix (DCM) from a quaterionion (q)</span></span></span>
<span class="srcline"><span class="lineno"><a href="15,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="15,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% q = [q1;q2;q3;q4] -&gt; With q4 being the scalar part of the quaternion.</span></span></span>
<span class="srcline"><span class="lineno"><a href="15,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="15,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="15,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T4:U3"><span class="var type1" id="S2T4U9">DCM</span> = <span class="mxinfo " id="T4:U5">[ <span class="mxinfo " id="T46:U6"><span class="mxinfo " id="T5:U7"><span class="mxinfo " id="T5:U8">1</span>-<span class="mxinfo " id="T5:U9"><span class="mxinfo " id="T5:U10">2</span>*(<span class="mxinfo " id="T5:U11"><span class="mxinfo " id="T5:U12"><span class="mxinfo " id="T5:U13"><span class="var type1" id="S3T48U20">q</span>(<span class="mxinfo " id="T37:U15">2</span>)</span>^2</span>+<span class="mxinfo " id="T5:U16"><span class="mxinfo " id="T5:U17"><span class="var type1" id="S3T48U25">q</span>(<span class="mxinfo " id="T37:U19">3</span>)</span>^2</span></span>)</span></span>, <span class="mxinfo " id="T5:U20"><span class="mxinfo " id="T5:U21">2</span>*(<span class="mxinfo " id="T5:U22"><span class="mxinfo " id="T5:U23"><span class="mxinfo " id="T5:U24"><span class="var type1" id="S3T48U34">q</span>(<span class="mxinfo " id="T37:U26">1</span>)</span>*<span class="mxinfo " id="T5:U27"><span class="var type1" id="S3T48U37">q</span>(<span class="mxinfo " id="T5:U29">2</span>)</span></span>+<span class="mxinfo " id="T5:U30"><span class="mxinfo " id="T5:U31"><span class="var type1" id="S3T48U41">q</span>(<span class="mxinfo " id="T5:U33">3</span>)</span>*<span class="mxinfo " id="T5:U34"><span class="var type1" id="S3T48U44">q</span>(<span class="mxinfo " id="T5:U36">4</span>)</span></span></span>)</span>, <span class="mxinfo " id="T5:U37"><span class="mxinfo " id="T5:U38">2</span>*(<span class="mxinfo " id="T5:U39"><span class="mxinfo " id="T5:U40"><span class="mxinfo " id="T5:U41"><span class="var type1" id="S3T48U52">q</span>(<span class="mxinfo " id="T37:U43">1</span>)</span>*<span class="mxinfo " id="T5:U44"><span class="var type1" id="S3T48U55">q</span>(<span class="mxinfo " id="T5:U46">3</span>)</span></span>-<span class="mxinfo " id="T5:U47"><span class="mxinfo " id="T5:U48"><span class="var type1" id="S3T48U59">q</span>(<span class="mxinfo " id="T5:U50">2</span>)</span>*<span class="mxinfo " id="T5:U51"><span class="var type1" id="S3T48U62">q</span>(<span class="mxinfo " id="T5:U53">4</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="15,8" id="srcline8"> 8</a></span><span class="line">        <span class="mxinfo " id="T46:U54"><span class="mxinfo " id="T5:U55"><span class="mxinfo " id="T5:U56">2</span>*(<span class="mxinfo " id="T5:U57"><span class="mxinfo " id="T5:U58"><span class="mxinfo " id="T5:U59"><span class="var type1" id="S3T48U71">q</span>(<span class="mxinfo " id="T37:U61">2</span>)</span>*<span class="mxinfo " id="T5:U62"><span class="var type1" id="S3T48U74">q</span>(<span class="mxinfo " id="T5:U64">1</span>)</span></span>-<span class="mxinfo " id="T5:U65"><span class="mxinfo " id="T5:U66"><span class="var type1" id="S3T48U78">q</span>(<span class="mxinfo " id="T5:U68">3</span>)</span>*<span class="mxinfo " id="T5:U69"><span class="var type1" id="S3T48U81">q</span>(<span class="mxinfo " id="T5:U71">4</span>)</span></span></span>)</span>, <span class="mxinfo " id="T5:U72"><span class="mxinfo " id="T5:U73">1</span>-<span class="mxinfo " id="T5:U74"><span class="mxinfo " id="T5:U75">2</span>*(<span class="mxinfo " id="T5:U76"><span class="mxinfo " id="T5:U77"><span class="mxinfo " id="T5:U78"><span class="var type1" id="S3T48U91">q</span>(<span class="mxinfo " id="T37:U80">1</span>)</span>^2</span>+<span class="mxinfo " id="T5:U81"><span class="mxinfo " id="T5:U82"><span class="var type1" id="S3T48U96">q</span>(<span class="mxinfo " id="T37:U84">3</span>)</span>^2</span></span>)</span></span>, <span class="mxinfo " id="T5:U85"><span class="mxinfo " id="T5:U86">2</span>*(<span class="mxinfo " id="T5:U87"><span class="mxinfo " id="T5:U88"><span class="mxinfo " id="T5:U89"><span class="var type1" id="S3T48U105">q</span>(<span class="mxinfo " id="T37:U91">2</span>)</span>*<span class="mxinfo " id="T5:U92"><span class="var type1" id="S3T48U108">q</span>(<span class="mxinfo " id="T5:U94">3</span>)</span></span>+<span class="mxinfo " id="T5:U95"><span class="mxinfo " id="T5:U96"><span class="var type1" id="S3T48U112">q</span>(<span class="mxinfo " id="T5:U98">1</span>)</span>*<span class="mxinfo " id="T5:U99"><span class="var type1" id="S3T48U115">q</span>(<span class="mxinfo " id="T5:U101">4</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="15,9" id="srcline9"> 9</a></span><span class="line">        <span class="mxinfo " id="T46:U102"><span class="mxinfo " id="T5:U103"><span class="mxinfo " id="T5:U104">2</span>*(<span class="mxinfo " id="T5:U105"><span class="mxinfo " id="T5:U106"><span class="mxinfo " id="T5:U107"><span class="var type1" id="S3T48U124">q</span>(<span class="mxinfo " id="T37:U109">3</span>)</span>*<span class="mxinfo " id="T5:U110"><span class="var type1" id="S3T48U127">q</span>(<span class="mxinfo " id="T5:U112">1</span>)</span></span>+<span class="mxinfo " id="T5:U113"><span class="mxinfo " id="T5:U114"><span class="var type1" id="S3T48U131">q</span>(<span class="mxinfo " id="T5:U116">2</span>)</span>*<span class="mxinfo " id="T5:U117"><span class="var type1" id="S3T48U134">q</span>(<span class="mxinfo " id="T5:U119">4</span>)</span></span></span>)</span>, <span class="mxinfo " id="T5:U120"><span class="mxinfo " id="T5:U121">2</span>*(<span class="mxinfo " id="T5:U122"><span class="mxinfo " id="T5:U123"><span class="mxinfo " id="T5:U124"><span class="var type1" id="S3T48U142">q</span>(<span class="mxinfo " id="T37:U126">3</span>)</span>*<span class="mxinfo " id="T5:U127"><span class="var type1" id="S3T48U145">q</span>(<span class="mxinfo " id="T5:U129">2</span>)</span></span>-<span class="mxinfo " id="T5:U130"><span class="mxinfo " id="T5:U131"><span class="var type1" id="S3T48U149">q</span>(<span class="mxinfo " id="T5:U133">1</span>)</span>*<span class="mxinfo " id="T5:U134"><span class="var type1" id="S3T48U152">q</span>(<span class="mxinfo " id="T5:U136">4</span>)</span></span></span>)</span>, <span class="mxinfo " id="T5:U137"><span class="mxinfo " id="T5:U138">1</span>-<span class="mxinfo " id="T5:U139"><span class="mxinfo " id="T5:U140">2</span>*(<span class="mxinfo " id="T5:U141"><span class="mxinfo " id="T5:U142"><span class="mxinfo " id="T5:U143"><span class="var type1" id="S3T48U162">q</span>(<span class="mxinfo " id="T37:U145">1</span>)</span>^2</span>+<span class="mxinfo " id="T5:U146"><span class="mxinfo " id="T5:U147"><span class="var type1" id="S3T48U167">q</span>(<span class="mxinfo " id="T37:U149">2</span>)</span>^2</span></span>)</span></span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="15,10" id="srcline10">10</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="15,11" id="srcline11">11</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
